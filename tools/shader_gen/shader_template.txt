/**

This File is generated by shader_gen 
DO NOT EDIT

**/
#pragma once
#include <GL/glew.h>
#include <GL/glut.h>
#include <iostream>
namespace render{
namespace shader{
namespace {shader_name}{

{vertex_shader} 
{fragment_shader} 

class {shader_name} {
public: 
  void compile(){
    GLuint vertexHandle = compileShader(vertex_shader,GL_VERTEX_SHADER);
    GLuint fragmentHandle = compileShader(fragment_shader,GL_FRAGMENT_SHADER);
    m_program = glCreateProgram();
    if(m_program == 0){
      std::cout << "Failed to compile shader" << std::endl; 
      return;
    }
    
    glAttachShader( m_program, vertexHandle ); 
    glAttachShader( m_program, fragmentHandle ); 
    glLinkProgram(m_program);
    
    GLint status = GL_FALSE;
    GLint maxLength = 0;
	  glGetShaderiv(m_program, GL_INFO_LOG_LENGTH, &maxLength);
	  std::vector<GLchar> errorLog(maxLength);

    glGetProgramiv(m_program, GL_LINK_STATUS, &status ); 
    if( GL_FALSE == status ) {
      std::cerr << "Failed to link shader program!" << std::endl;
      GLint logLen; 
      glGetProgramiv(m_program, GL_INFO_LOG_LENGTH, &logLen); 
      if( logLen > 0 ) { 
        std::string(logLen, ' ');
        GLsizei written;
        glGetProgramInfoLog(m_program, logLen, &written, &errorLog[0]); 
        std::cerr << "Program log: " << std::endl << &errorLog;
      } 
    }
    bind();
  }


  {uniform_accessors};
  {attribute_accessors};
private:
  
  GLuint compileShader(const char* const shader, GLuint shaderType){
    GLuint vertShader = glCreateShader( shaderType ); 
    glShaderSource( vertShader, 1, &shader, NULL ); 
    glCompileShader( vertShader );
    
    GLint result;
    GLint maxLength = 0;
	  glGetShaderiv(vertShader, GL_INFO_LOG_LENGTH, &maxLength);
	  std::vector<GLchar> errorLog(maxLength);

    glGetShaderiv( vertShader, GL_COMPILE_STATUS, &result ); 
    if( GL_FALSE == result ) { 
      std::cerr << "Vertex shader compilation failed!" << std::endl;
      GLint logLen; 
      glGetShaderiv(vertShader, GL_INFO_LOG_LENGTH, &logLen); 
      if( logLen > 0 ) { 
        std::string log(logLen, ' '); 
        GLsizei written; 
        glGetShaderInfoLog(vertShader, logLen, &written, &errorLog[0]); 
        std::cerr << "Shader log: " << std::endl << &errorLog[0];
      } 
    }
    return vertShader;
  };

  void bind(){
    {bind_body}
  }
  {members}
  GLuint m_program;
};


}
}
}
